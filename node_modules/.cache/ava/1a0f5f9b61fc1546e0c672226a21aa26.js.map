{"version":3,"sources":["test.js"],"names":["sleep","time","resolve","setTimeout","before","then","t","get","expect","res","is","status","truthy","body","length","missing","reduce","prev","cur","indexOf","firstname","splice","join","model","checkId","Math","floor","random","newUser","lastname","email","post","send","userCheckData","foundUser","year","make","ownerId","vehicleCheckData","db","run","err","response","count","checkEmail","getCars","car","ownerid","put","id","updateRequest","getCars2","match","delete","makeCar","findCar","deleteRes","checkCars","carGone"],"mappings":"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","file":"test.js","sourcesContent":["import test from 'ava'\nimport request from 'supertest-as-promised'\nimport app from './index'\n// import Faker from 'faker'\n\nfunction sleep (time) {\n  return new Promise((resolve) => setTimeout(resolve, time));\n}\n\ntest.before(function(){\n  return sleep(1000).then(function(){\n  });\n})\n\ntest('Get Users request works and returns correct users', async t=>{\n  const res = await request(app)\n    .get('/api/users')\n    .expect(200)\n  t.is(res.status, 200, 'Status is not 200')\n  t.truthy(res.body.length >=3, 'There should be at least 3 users')\n  var missing = res.body.reduce(\n    function(prev, cur){\n      if (prev.indexOf(cur.firstname) >-1){\n        prev.splice(prev.indexOf(cur.firstname),1);\n      }\n      return prev;\n    },[\"Dave\",\"John\",\"Jane\"]);\n  t.truthy(missing.length === 0, missing.join(\", \") + \" are missing from the database\");\n})\n\ntest('Get Vehicles request works and returns correct users', async t=>{\n  const res = await request(app)\n    .get('/api/vehicles')\n    .expect(200)\n  t.is(res.status, 200, 'Status is not 200')\n  t.truthy(res.body.length >=6, 'There should be at least 6 vehicles')\n  var missing = res.body.reduce(\n    function(prev, cur){\n      if (prev.indexOf(cur.model) >-1){\n        prev.splice(prev.indexOf(cur.model),1);\n      }\n      return prev;\n    },[\"Camry\",\"Civic\",\"Focus\", \"Taurus\",\"Bug\",\"Coup\"]);\n  t.truthy(missing.length === 0, \"The \" + missing.join(\", \") + \" are missing from the database\");\n})\n\ntest('Post User works', async t=>{\n  var checkId = Math.floor(Math.random()*100);\n  var newUser = {firstname:\"Mr\", lastname:\"Clean\", email:\"Clean@Machine.\"+checkId}\n  const res = await request(app)\n    .post('/api/users')\n    .send(newUser)\n\n  t.is(res.status, 200, 'Status is not 200');\n  let userCheckData = await request(app)\n    .get('/api/users')\n\n  t.is(userCheckData.status, 200, \"GET Users endpoint must be written to evaluate test\")\n  let foundUser = userCheckData.body.reduce((prev, cur) => {\n    return prev || cur.email == newUser.email;\n  }, false)\n\n  t.truthy(foundUser, \"New user was not found in the database\");\n})\n\ntest('Post Vehicle works', async t=>{\n  var year = Math.floor(Math.random()*100+2200);\n  var newUser = {make:\"Bat\", model:\"Mobile\", year:year, ownerId:2}\n  const res = await request(app)\n    .post('/api/vehicles')\n    .send(newUser)\n\n  t.is(res.status, 200, 'Status is not 200');\n  await sleep(100);\n  let vehicleCheckData = await request(app)\n    .get('/api/vehicles')\n  t.is(vehicleCheckData.status, 200, \"GET Vehicles endpoint must be written to evaluate test\")\n  let foundUser = vehicleCheckData.body.reduce((prev, cur) => {\n    return prev || cur.year == newUser.year;\n  }, false)\n  t.truthy(foundUser, \"New vehicle was not found in the database\");\n})\n\ntest('Get Count of Vehicles By owner\\'s Id' ,async t =>{\nconst res = await request(app)\n  .get('/api/user/1/vehiclecount')\n  let db = app.get('db');\n  db.run('SELECT Count(*) FROM vehicles WHERE ownerId = 1',\n  function(err, response){\n    t.is(res.status, 200, 'Status is not 200')\n    t.truthy(res.body.count, 'Expected an object with a count property')\n    t.is(res.body.count, response[0].count, 'The count is not correct.')\n  });\n\n})\n\ntest('Get Vehicles By owner\\'s Id' ,async t =>{\nconst res = await request(app)\n  .get('/api/user/1/vehicle')\n    t.is(res.status, 200, 'Status is not 200')\n    t.truthy(res.body.length, 'Expected an object with a count property')\n    t.truthy(res.body[0].make, 'Expected a make propety')\n    t.truthy(res.body[0].model, 'Expected a model property')\n    var checkId = res.body.reduce(function(prev, cur){\n      if (!prev) return prev;\n      return cur.ownerId = 1;\n    },true)\n    t.truthy(checkId, 'Not all cars returned have ownerId of 1');\n})\n\ntest('Get Vehicles By Email' ,async t =>{\nconst res = await request(app)\n  .get('/api/vehicle?UserEmail=John@Smith.com')\n    t.is(res.status, 200, 'Status is not 200')\n    // t.is(res.body.length >=3 , 'Expected at least 3 cars for John@Smith.com')\n    t.truthy(res.body[0].email, 'Expected to see an email propety')\n    t.truthy(res.body[0].make, 'Expected to see a make propety')\n    t.truthy(res.body[0].model, 'Expected to see a model propety')\n    var checkEmail = res.body.reduce(function(prev, cur){\n      if (!prev) return prev;\n      return cur.email = \"John@Smith.com\"\n    },true)\n    t.truthy(checkEmail, 'Not all vehicles returned were for John@Smith.com')\n})\n\ntest('Get Vehicles By Partial First Name' ,async t =>{\nconst res = await request(app)\n  .get('/api/vehicle?userFirstStart=J')\n    t.is(res.status, 200, 'Status is not 200')\n    // t.is(res.body.length >=3 , 'Expected at least 3 cars for John@Smith.com')\n    t.truthy(res.body[0].firstname, 'Expected to see a firstname propety')\n    t.truthy(res.body[0].make, 'Expected to see a make propety')\n    t.truthy(res.body[0].model, 'Expected to see a model propety')\n    t.truthy(res.body[0].year, 'Expected to see a year propety')\n    var checkEmail = res.body.reduce(function(prev, cur){\n      if (!prev) return prev;\n      return cur.firstname[0] == \"J\"\n    },true)\n    var missing = res.body.reduce(\n      function(prev, cur){\n        if (prev.indexOf(cur.firstname) >-1){\n          prev.splice(prev.indexOf(cur.firstname),1);\n        }\n        return prev;\n      },[\"Jane\",\"John\"]);\n    t.is(missing.length,0, missing.join(\", \") + ' should have pulled up in this query')\n})\n\ntest('Get Vehicles newer than 2000, sort newest first' ,async t =>{\nconst res = await request(app)\n  .get('/api/newervehiclesbyyear')\n    t.is(res.status, 200, 'Status is not 200')\n\n    t.truthy(res.body.length, 'Expected at least 1 new car')\n    t.truthy(res.body[0].firstname, 'Expected owners firstname')\n    t.truthy(res.body[0].lastname, 'Expected owners lastname')\n\n    t.truthy(res.body[0].year - res.body[res.body.length - 1 ].year>=0, 'Expected newest cars first')\n})\n\ntest('Update Vehicle to new Owner', async t =>{\n  const getCars = await request(app)\n    .get('/api/vehicles')\n\n    t.is(getCars.status, 200, \"Must write GET /api/vehicles endpoint before this test\")\n\n  var car = getCars.body.reduce(function(prev, cur){\n    if(cur.ownerid == 2){\n      return cur;\n    }\n    return prev;\n  },{})\n  const updateRequest = await request(app)\n    .put('/api/vehicle/' + car.id + '/user/3')\n    t.is(updateRequest.status, 200, \"Update Request Status should be 200\")\n  const getCars2 = await request(app)\n    .get('/api/vehicles')\n\n    let match = getCars2.body.reduce(function (prev, cur){\n      return prev || (cur.id==car.id?cur.ownerid:0);\n    }, 0);\n\n    t.is(match, 3, \"Car should be updated to ownerId of 3\");\n});\n\ntest('Remove Vehicles Owner', async t =>{\n  const getCars = await request(app)\n    .get('/api/vehicles')\n    t.is(getCars.status, 200, \"Must write GET /api/vehicles endpoint before this test\")\n  var car = getCars.body.reduce(function(prev, cur){\n    if(cur.ownerid == 3){\n      return cur;\n    }\n    return prev;\n  },{})\n\n  const updateRequest = await request(app)\n    .delete('/api/user/3/vehicle/' + car.id)\n    t.is(updateRequest.status, 200, \"Update Request Status should be 200\")\n  const getCars2 = await request(app)\n    .get('/api/vehicles')\n    let match = getCars2.body.reduce(function (prev, cur){\n      return prev || (cur.id==car.id?cur.ownerid:0);\n    }, 0);\n    t.truthy(!match,\"ownerId not removed from vehicle\");\n});\n\ntest('Deleting A Vehicle', async t=>{\n  await sleep(1000)\n  var newUser = {make:\"Delete\", model:\"Me\", year:11, ownerId:1}\n  const makeCar = await request(app)\n    .post('/api/vehicles')\n    .send(newUser)\n\n  const findCar = await request(app)\n    .get('/api/vehicles')\n  t.is(findCar.status, 200, \"The Get Vehicles endpoint is not working\");\n  const car = findCar.body.reduce(function(prev, cur){\n    if(cur.make == \"Delete\") return cur;\n    return prev;\n  },{})\n\n  t.truthy(car.id, \"Not Creating new cars\");\n\n  const deleteRes = await request(app)\n    .delete('/api/vehicle/' + car.id)\n\n  t.is(deleteRes.status, 200, \"Delete Request status not 200\");\n\n  const checkCars = await request(app)\n    .get('/api/vehicles')\n\n  t.is(checkCars.status, 200, \"Request status not 200\");\n  var carGone = checkCars.body.reduce(function(prev, cur){\n    if (cur.id == car.id) prev = false;\n    return prev\n  },true)\n  t.truthy(checkCars.body.length, \"Should not delete all cars\");\n  t.truthy(carGone, \"The car was not removed\");\n})\n"]}